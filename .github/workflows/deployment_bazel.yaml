name: Ansible Deployment (Bazel)
on:
  pull_request:
    branches:
      - main
    paths:
      - 'bazel/**'
  workflow_dispatch:
jobs:
  build:
    runs-on: ubuntu-latest
    outputs:
      package-file: ${{ steps.build_result.outputs.package }}
    steps:
      - name: Get code
        uses: actions/checkout@v3
      - name: Bazel build
        id: bazel_build
        uses: ./.github/actions/bazel-build/
      - name: Show package
        id: build_result
        run: echo echo "package=${{ steps.bazel_build.outputs.bazel_bin }}/${{ steps.bazel_build.outputs.bazel_output }}" >> $GITHUB_OUTPUT
